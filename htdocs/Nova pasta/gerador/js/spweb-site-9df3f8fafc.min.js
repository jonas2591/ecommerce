if(function(t){var e=t({});t.subscribe=function(){e.on.apply(e,arguments)},t.unsubscribe=function(){e.off.apply(e,arguments)},t.publish=function(){e.trigger.apply(e,arguments)}}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var o=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.4",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){r.detach().trigger("closed.bs.alert").remove()}var o=t(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var r=t(s);e&&e.preventDefault(),r.length||(r=o.closest(".alert")),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.button"),s="object"==typeof e&&e;o||i.data("bs.button",o=new n(this,s)),"toggle"==e?o.toggle():e&&o.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",s=i.data();e+="Text",null==s.resetText&&i.data("resetText",i[o]()),setTimeout(t.proxy(function(){i[o](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.carousel"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),r="string"==typeof e?e:s.slide;o||i.data("bs.carousel",o=new n(this,s)),"number"==typeof e?o.to(e):r?o[r]():s.interval&&o.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),i="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(i&&!this.options.wrap)return e;var o="prev"==t?-1:1,s=(n+o)%this.$items.length;return this.$items.eq(s)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(e,i){var o=this.$element.find(".item.active"),s=i||this.getItemForDirection(e,o),r=this.interval,a="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var c=s[0],u=t.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(s)]);d&&d.addClass("active")}var h=t.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,o.addClass(a),s.addClass(a),o.one("bsTransitionEnd",function(){s.removeClass([e,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(h)),r&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var o=function(n){var i,o=t(this),s=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var r=t.extend({},s.data(),o.data()),a=o.attr("data-slide-to");a&&(r.interval=!1),e.call(s,r),a&&s.data("bs.carousel").to(a),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),s=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!o&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),o||n.data("bs.collapse",o=new i(this,s)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.4",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),e||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[r](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var o=t(i);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=t(this);o.attr("data-target")||i.preventDefault();var s=e(o),r=s.data("bs.collapse"),a=r?"toggle":o.data();n.call(s,a)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(o).remove(),t(s).each(function(){var i=t(this),o=n(i),s={relatedTarget:this};o.hasClass("open")&&(o.trigger(e=t.Event("hide.bs.dropdown",s)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",s)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})}var o=".dropdown-backdrop",s='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.4",r.prototype.toggle=function(i){var o=t(this);if(!o.is(".disabled, :disabled")){var s=n(o),r=s.hasClass("open");if(e(),!r){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(s.trigger(i=t.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},r.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var o=n(i),r=o.hasClass("open");if(!r&&27!=e.which||r&&27==e.which)return 27==e.which&&o.find(s).trigger("focus"),i.trigger("click");var a=" li:not(.disabled):visible a",l=o.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,r.prototype.toggle).on("keydown.bs.dropdown.data-api",s,r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',r.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,i){return this.each(function(){var o=t(this),s=o.data("bs.modal"),r=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e);s||o.data("bs.modal",s=new n(this,r)),"string"==typeof e?s[e](i):r.show&&s.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t('<div class="modal-backdrop '+o+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),o=i.attr("href"),s=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),i.data());i.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(s,r,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),s="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||i.data("bs.tooltip",o=new n(this,s)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var r=o[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var o=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var u=this.getPosition(),d=s[0].offsetWidth,h=s[0].offsetHeight;if(c){var p=a,f=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(f);a="bottom"==a&&u.bottom+h>m.bottom?"top":"top"==a&&u.top-h<m.top?"bottom":"right"==a&&u.right+d>m.width?"left":"left"==a&&u.left-d<m.left?"right":a,s.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,u,d,h);this.applyPlacement(g,a);var v=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),o=i[0].offsetWidth,s=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top=e.top+r,e.left=e.left+a,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=s&&(e.top=e.top+s-c);var u=this.getViewportAdjustedDelta(n,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var d=/top|bottom/.test(n),h=d?2*u.left-o+l:2*u.top-s+c,p=d?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(h,i[0][p],d)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=o.hoverState&&s.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,s=t(this.$tip),r=t.Event("hide.bs."+this.type);if(this.$element.trigger(r),!r.isDefaultPrevented())return s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=i?{top:0,left:0}:e.offset(),r={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,r,a,s)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-s-r.scroll,l=e.top+s-r.scroll+i;a<r.top?o.top=r.top-a:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var c=e.left-s,u=e.left+s+n;c<r.left?o.left=r.left-c:u>r.width&&(o.left=r.left+r.width-u)}return o},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.popover"),s="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||i.data("bs.popover",o=new n(this,s)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),+function(t){"use strict";function e(n,i){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),o=i.data("bs.scrollspy"),s="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new e(this,s)),"string"==typeof n&&o[n]()})}e.VERSION="3.3.4",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),s=/^#./.test(o)&&t(o);return s&&s.length&&s.is(":visible")&&[[s[n]().top+i,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,s=this.targets,r=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return r!=(t=s[s.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=s[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new n(this)),"string"==typeof e&&o[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){
var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=n.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),r=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(s),e.trigger(r),!r.isDefaultPrevented()&&!s.isDefaultPrevented()){var a=t(i);this.activate(e.closest("li"),n),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(e,i,o){function s(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var r=i.find("> .active"),a=o&&t.support.transition&&(r.length&&r.hasClass("fade")||!!i.find("> .fade").length);r.length&&a?r.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),r.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var o=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.affix"),s="object"==typeof e&&e;o||i.data("bs.affix",o=new n(this,s)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.4",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var o=this.$target.scrollTop(),s=this.$element.offset(),r=this.$target.height();if(null!=n&&"top"==this.affixed)return o<n&&"top";if("bottom"==this.affixed)return null!=n?!(o+this.unpin<=s.top)&&"bottom":!(o+r<=t-i)&&"bottom";var a=null==this.affixed,l=a?o:s.top,c=a?r:e;return null!=n&&o<=n?"top":null!=i&&l+c>=t-i&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,o=i.top,s=i.bottom,r=t(document.body).height();"object"!=typeof i&&(s=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof s&&(s=i.bottom(this.$element));var a=this.getState(r,e,o,s);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:r-e-s})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(jQuery),+function(t){"use strict";function e(){var t,e=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}function n(){return"ontouchstart"in window||"onmsgesturechange"in window}function i(e){return this.each(function(){var n=t(this),i=n.data("sp.sidepanel"),s=t.extend({},o.DEFAULTS,n.data(),"object"==typeof e&&e);!i&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),i||n.data("sp.sidepanel",i=new o(this,s)),"string"==typeof e&&i[e]()})}var o=function(n,i){var s=t("html, body").hasClass("force-hamburger");this.options=t.extend({},o.DEFAULTS,i),this.isVisible=!1,this.$element=t(n),this.$navbarHeader=t(n).siblings(".navbar-header"),this.$container=this.$element.parents(".navbar"),this.$toggle=this.$navbarHeader.find(".navbar-toggle"),this.animationEndEvent=e(),t(window).resize(function(){this.isVisible&&window.innerWidth>=o.TOGGLE_BREAKPOINT&&!s?this.hide({skipAnimation:!0}):this.isVisible&&this.setDimensions()}.bind(this)),this.setDimensions(),this.options.toggle&&this.toggle()};o.TOGGLE_BREAKPOINT=992,o.MOBILE_BREAKPOINT=480,o.DESKTOP_WIDTH=400,o.MOBILE_WIDTH=270,o.SIDEPANEL_PADDING=38,o.CLOSE_DURATION=270,o.MENU_ITEM_ANIMATION_DELAY=17,o.DEFAULTS={},o.prototype.setDimensions=function(){var t,e=(this._getNavBarWidth(),this.$element.find(".nav")[0].scrollHeight),i=this.$element.find(".navbar-brand").parent();if(t=this.$toggleClone?window.innerWidth-this.$toggleClone.position().left:window.innerWidth-this.$toggle.position().left,n()?(this.$element.css({width:"100%"}),this.$element.css("overflow","hidden").height(),this.$element.css("overflow","auto")):(e+i.outerHeight(!0)+o.SIDEPANEL_PADDING<window.innerHeight?i.addClass("fixed-bottom"):i.removeClass("fixed-bottom"),window.innerWidth>=o.MOBILE_BREAKPOINT?this.$element.css({width:t+o.DESKTOP_WIDTH+"px"}):this.$element.css({width:t+o.MOBILE_WIDTH+"px"})),this.$toggleClone){var s=this.$toggle.position().left;this.$toggleClone.css({left:s+"px",top:0})}},o.prototype.toggle=function(){this[this.isVisible?"hide":"show"]()},o.prototype.show=function(){if(!this.isTransitioning&&(this.isVisible=!0,this.$toggle.removeClass("collapsed"),t("body").addClass("sidepanel-active"),this.$container.addClass("navbar-sidepanel"),this.$element.find(".navbar-brand").length||this._generateBrand(),this.animationEndEvent&&this.$element.find("li a, .divider").each(function(e,n){t(n).css({"animation-delay":e*o.MENU_ITEM_ANIMATION_DELAY+"ms"})}),this.$container.prepend('<div class="sidepanel-backdrop"></div>'),this.$container.on("click.sp.sidepanel",".sidepanel-backdrop",function(){this.hide()}.bind(this)),this.animationEndEvent?(this.$element.one(this.animationEndEvent,function(){this.isTransitioning=!1,this.$element.removeClass("animate-in"),this.$element.addClass("open")}.bind(this)),this.isTransitioning=!0,this.$element.addClass("animate-in")):this.$element.addClass("open"),this.setDimensions(),"fixed"!==this.$container.css("position"))){var e=this.$toggle.position().left;this.$toggleClone=this.$toggle.clone(),this.$toggle.css({opacity:0}),this.$toggleClone.css({display:"none",position:"fixed",left:e+"px",top:0}),this.$toggle.after(this.$toggleClone),this.$toggleClone.show()}},o.prototype.hide=function(e){function n(){this.$container.find("._generated-nav-brand").remove(),this.$container.find(".sidepanel-backdrop").remove(),this.$element.css({width:"auto"}).removeClass("open"),this.$container.removeClass("navbar-sidepanel"),t("body").removeClass("sidepanel-active")}var e=e||{};this.isTransitioning||(this.isVisible=!1,this.$toggle.addClass("collapsed"),this.$toggleClone&&(this.$toggleClone.remove(),this.$toggle.css({opacity:1}),delete this.$toggleClone),this.animationEndEvent&&!e.skipAnimation?(this.$element.one(this.animationEndEvent,function(){this.isTransitioning=!1,this.$element.removeClass("animate-out"),n.call(this,null)}.bind(this)),this.isTransitioning=!0,this.$container.find(".sidepanel-backdrop").fadeOut(o.CLOSE_DURATION),this.$element.addClass("animate-out")):n.call(this,null))},o.prototype._getNavBarWidth=function(){return this.$element.outerWidth(!0)},o.prototype._generateBrand=function(){var e=this.$container.find(".navbar-brand").clone(),n=t('<li class="_generated-nav-brand">').append(e);this.$element.find(".nav").append(n)};var s=t.fn.spSidepanel;t.fn.spSidepanel=i,t.fn.spSidepanel.Constructor=o,t.fn.spSidepanel.noConflict=function(){return t.fn.spSidepanel=s,this},t(document).off("click.sp.sidepanel").on("click.sp.sidepanel","[data-toggle=sidepanel]",function(e){var n=t(this);n.attr("data-target")||e.preventDefault();var o=t(n.attr("data-target")),s=o.data("sp.sidepanel"),r=s?"toggle":n.data();i.call(o,r)})}(jQuery),function(){"use strict";function t(e,i){function o(t,e){return function(){return t.apply(e,arguments)}}var s;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=e,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!t.notNeeded(e)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,l=0,c=r.length;l<c;l++)a[r[l]]=o(a[r[l]],a);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,n.hijacked||n,i):o.call(e,t,n,i)},e.addEventListener=function(t,n,i){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):o.call(e,t,n,i)}),"function"==typeof e.onclick&&(s=e.onclick,e.addEventListener("click",function(t){s(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,o=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),s=i&&/OS [6-7]_\d/.test(navigator.userAgent),r=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(i&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;i&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,s;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],i){if(s=window.getSelection(),s.rangeCount&&!s.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},t.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,r,a,l,c,u=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,r=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,s&&(c=t.changedTouches[0],u=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=u.tagName.toLowerCase(),"label"===a){if(e=this.findControl(u)){if(this.focus(u),n)return!1;u=e}}else if(this.needsFocus(u))return t.timeStamp-r>100||i&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),i&&"select"===a||(this.targetElement=null,t.preventDefault()),!1);return!(!i||o||(l=u.fastClickScrollParent,!l||l.fastClickLastScrollTop===l.scrollTop))||(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,i,o,s;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(e.content.indexOf("user-scalable=no")!==-1)return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(r&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),o[1]>=10&&o[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(e.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(s=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(s>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(e.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===t.style.touchAction||"manipulation"===t.style.touchAction))},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}(),"undefined"==typeof window.console&&(window.console={log:function(){}});var spweb=spweb||{};spweb.utils=function(t){"use strict";var e={objectLength:function(t){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n},getQueryParameter:function(t,e){e=e||window.location.search,t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=n.exec(e);return null==i?"":decodeURIComponent(i[1].replace(/\+/g," "))},redirect:function(t){window.location.href=t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},asyncLoadJs:function(t,e){var n="function"==typeof e&&e,i=i||window.document,o=i.createElement("script"),s=i.getElementsByTagName("script")[0];o.async="async",o.src=t,o.onload=o.onreadystatechange=function(){o.readyState?"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,n&&n()):n&&n()},s.parentNode.insertBefore(o,s)},inherit:function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},shuffle:function(t){var e,n,i;for(e=t.length-1;e>0;e--)n=Math.floor(Math.random()*(e+1)),i=t[e],t[e]=t[n],t[n]=i;return t},updateLazyLoadImages:function(){var e=!1===t.mq("(min-width: 768px)");$("div.lazy").each(function(t){var n,i=$(this);i.hasClass("lazy-no-small")||(e&&i.attr("data-original").indexOf("-sm")<0&&(n=i.attr("data-original").replace(".jpg","-sm.jpg").replace(".png","-sm.png"),i.attr("data-original",n)),!e&&i.attr("data-original").indexOf("-sm")>0&&(n=i.attr("data-original").replace("-sm.jpg",".jpg").replace("-sm.png",".png"),i.attr("data-original",n)),"none"!==i.css("background-image")&&void 0!==n&&i.css("background-image","url("+n+")"))})}};return e}(Modernizr),spweb.cookie=function(){"use strict";var t={};return t.set=function(t){var e,n,i,o=t.name;if("undefined"==typeof t.value?(e="",n="-1"):e=t.value,"undefined"!=typeof t.expires){var s=new Date;s.setTime(s.getTime()+24*t.expires*60*60*1e3),n="; expires="+s.toGMTString()}else n="";i="undefined"!=typeof t.domain&&null!==t.domain?"; domain="+t.domain:"",window.document.cookie=o+"="+e+n+i+"; path=/"},t.get=function(t){var e,n=t+"=",i=window.document.cookie.split(";");for(e=0;e<i.length;e+=1){for(var o=i[e];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null},t.remove=function(t){this.set({name:t})},t}(),spweb.securityMonitor=function(t,e){"use strict";var n={},i=function(n,i){var o;try{o.XY.Z}catch(o){var s={args:i,browser:window.navigator.userAgent,url:window.location.href,referrer:document.referrer,trace:o.stack||"N/A"};t.ajax({type:"POST",url:"/"+e.getMarket()+"/xhr/json/tracking.php",data:{event:"SecurityWarning",params:JSON.stringify({type:n+":web-site",log_data:s})}}),t.ajax({type:"POST",url:"/"+e.getMarket()+"/xhr/json/security-monitor.php",data:{site:window.location.origin,method:n,data:JSON.stringify(s)}})}};return n.init=function(){!function(t){window.alert=function(){var e=Array.prototype.slice.call(arguments);return i("alert",e),t.apply(window,e)}}(window.alert),function(t){window.prompt=function(){var e=Array.prototype.slice.call(arguments);return i("prompt",e),t.apply(window,e)}}(window.prompt),function(t){window.confirm=function(){var e=Array.prototype.slice.call(arguments);return i("confirm",e),t.apply(window,e)}}(window.confirm)},n}(jQuery,spweb.user),spweb.detect=function(){"use strict";function t(){return[{note:"Windows Phone: pretends to be iPhone and Android, so it has to stay first in the list",os:e.OS_WPHONE,mobile:!0,matches:["Windows Phone","Windows CE","Window Mobile","XBLWP7","ZuneWP7","Windows NT \\d{1,2}\\.\\d{1,2}; ARM","IEMobile"]},{note:"Google Android",os:e.OS_ANDROID,mobile:!0,matches:["Android"]},{note:"Apple iOS",os:e.OS_IOS,mobile:!0,matches:["iPhone","iPod","iPad","MobileSafari","CriOS"]},{note:"Apple Mac OS X",os:e.OS_MAC,mobile:!1,matches:["Mac OS X"]},{note:"Mobile games consoles",os:e.OS_UNKNOWN,mobile:!0,matches:["PlayStation Vita","Nintendo WiiU","Nintendo 3DS"]},{note:"TV games consoles",os:e.OS_UNKNOWN,mobile:!1,matches:["PlayStation 4","PLAYSTATION 3"]},{note:"Smart TVs",os:e.OS_UNKNOWN,mobile:!1,matches:["SMART-TV","SmartTV","NETTV","PhilipsTV","GoogleTV","HbbTV","AQUOSBrowser","BRAVIA","SonyBDP","Viera"]},{note:"Linux Desktop: Firefox is not very clear on Linux/FirefoxOS, but we assume Intel platform is desktop Linux, and ARM is mobile.",os:e.OS_LINUX,mobile:!1,matches:["Linux i686"]},{note:"Firefox OS (mobile): Firefox is not very clear on Linux/FirefoxOS, but we assume Intel platform is desktop Linux, and ARM is mobile.",os:e.OS_UNKNOWN,mobile:!0,matches:["Linux armv7l"]},{note:"Google Chrome OS",os:e.OS_CHROMEOS,mobile:!1,matches:["CrOS"]},{note:"Microsoft Windows",os:e.OS_WINDOWS,mobile:!1,matches:["Windows","Win64"]},{note:"BlackBerry",os:e.OS_BLACKBERRY,mobile:!0,matches:["PlayBook","RIM Tablet","blackberry","BlackBerry","BB10","rim tablet os"]},{note:"Samsung Mobile OS variants",os:e.OS_UNKNOWN,mobile:!0,matches:["Bada","Tizen","SpreadTrum"]},{note:"Amazon Kindle (forked Android that needs a separate app store link)",os:e.OS_KINDLE,mobile:!0,matches:["Kindle","Silk"]},{note:"Nokia Symbian",os:e.OS_SYMBIAN,mobile:!0,matches:["nokian73","S60V3","Series 60","SymbOS","SymbianOS"]},{note:"Java Mobile: Various low-cost smart phones",os:e.OS_UNKNOWN,mobile:!0,matches:["J2ME","MIDP","CLDC"]},{note:"UCBrowser: this seems to be quite popular on several platforms, but its impossible to tell them apart. We should probably assume Android?",os:e.OS_ANDROID,mobile:!0,matches:["UCBrowser","UCWEB","UCWEB\\d"]},{note:"If we havent detected anything by this point, we should look for some generic indications that we have a mobile device.",os:e.OS_UNKNOWN,mobile:!0,matches:["Mobile","Tablet","Opera Mini"]},{note:"Final match for linux desktop",os:e.OS_LINUX,mobile:!1,matches:["Linux"]}]}var e={};return e.OS_WPHONE="wphone",e.OS_ANDROID="android",e.OS_IOS="ios",e.OS_MAC="mac",e.OS_LINUX="linux",e.OS_CHROMEOS="chromeos",e.OS_WINDOWS="windows",e.OS_BLACKBERRY="blackberry",e.OS_KINDLE="kindle",e.OS_SYMBIAN="symbian",e.OS_UNKNOWN="unknown",e.detect=function(n){var i,o,s,r,a;for(null===n&&(n=window.navigator.userAgent),r=t(),a=" "+n+" ",i=0;i<r.length;i++)if(o=r[i],s=new RegExp("\\b"+o.matches.join("\\b|\\b")+"\\b"),s.test(a))return{os:o.os,mobile:o.mobile};return{os:e.OS_UNKNOWN,mobile:!1}},e}(),spweb.user=function(t){"use strict";var e=null,n=null,i={};return i.getLang=function(){return null===e&&(e=t("body").attr("class").match(/l-([\w]+)/)[1]),e},i.getMarket=function(){return null===n&&(n=t("body").attr("class").match(/m-([\w-]+)/)[1]),n},i.isLoggedIn=function(){return t("body").hasClass("is-loggedin")},i}(jQuery),spweb.analytics=function(t,e,n){"use strict";var i,o={};return i=function(){e("[data-ga-category]").bind("click",function(){var t=e(this),n=t.data("ga-category")||"",i=t.data("ga-action")||"",s=t.data("ga-label")||"";n&&i&&o.sendEvent(n,i,s)}),e.subscribe("login_username_success",function(){t.dataLayer.push({event:"login_username_success"})}),e.subscribe("login_facebook_success",function(){t.dataLayer.push({event:"login_facebook_success"})}),n.get("sp_fblt")&&(e.publish("login_facebook_success"),n.remove("sp_fblt"))},o.getTest=function(t){var e,i,o,s;if(e=n.get("sp_ab"),!e)return"";i=unescape(e);try{o=JSON.parse(i)}catch(t){return""}return o?(s=o[t],s?s:""):""},o.init=function(){i()},o.trackEvent=function(t,e,n){this.sendEvent(t,e,n)},o.sendEvent=function(e,n,i,o){"string"==typeof e&&"string"==typeof n&&(t.ga("set","anonymizeIp",!0),t.ga("send","event",e,n,i),t.spAnalytics.logEvent(e,n,i,o))},o.sendGtmEvent=function(e,n){"string"==typeof e.category&&"string"==typeof e.action&&t.dataLayer.push({event:n||"GAEvent",eventCategory:e.category,eventAction:e.action,eventLabel:e.label,eventValue:e.value,eventCallback:e.callback})},o}(this,jQuery,spweb.cookie),spweb.tracking=function(t,e,n){"use strict";var i={};return i.pushGTMEvent=function(e){t.dataLayer.push({event:e})},e.subscribe("registration_success",function(){i.pushGTMEvent("registration_success")}),i.init=function(){this._setGTMDeviceData(),this._bindEventHandlers()},i._setGTMDeviceData=function(){t.dataLayer.push({device:n.detect().mobile?"mobile":"desktop"})},i._bindEventHandlers=function(){var t=this;e(".js-gtm-event").on("click",function(){var n=e(this);t._handleGTMClick(n)})},i._handleGTMClick=function(t){var e=t.data("gtm-event-name");void 0!==e&&i.pushGTMEvent(e)},i}(this,jQuery,spweb.detect),spweb.download=function(t,e){"use strict";var n={};return n.download=function(n){t(document).ready(function(){setTimeout(function(){window.location.href=n},100)}),e.remove("pxt")},n}(jQuery,spweb.cookie),spweb.messageBars=function(t,e){"use strict";var n={active:{},init:function(){spweb.messageBars.holder=t("#js-message-bars");for(var e in spweb.messageBars)spweb.messageBars.initMessageBar(e)},initMessageBar:function(n){if(spweb.messageBars[n]&&spweb.messageBars[n].name&&spweb.messageBars[n].selector){if(spweb.messageBars[n].element=t(spweb.messageBars[n].selector),0===spweb.messageBars[n].element.length)return;if(e.get(spweb.messageBars[n].name))return;spweb.messageBars[n]._show=function(){spweb.messageBars[n].element.removeClass("hidden")},spweb.messageBars[n]._hide=function(){spweb.messageBars[n].element.addClass("hidden")},spweb.messageBars.add(spweb.messageBars[n]),spweb.messageBars[n].element.alert(),spweb.messageBars[n].element.on("closed.bs.alert",function(){var t={name:spweb.messageBars[n].name,value:"1"};spweb.messageBars[n].multiDomainCookie&&(t.domain="."+window.location.host.split(".").splice(1).join(".")),spweb.messageBars[n].cookieExpirationDays&&(t.expires=spweb.messageBars[n].cookieExpirationDays),e.set(t),spweb.messageBars.remove(spweb.messageBars[n])}),"function"==typeof spweb.messageBars[n].init&&spweb.messageBars[n].init()}},add:function(e){spweb.messageBars.active[e.name]=e,e._show(),t.publish("message_bars_shown")},remove:function(e){delete spweb.messageBars.active[e.name],e._hide(),spweb.messageBars.hasItem()?t.publish("message_bars_shown"):t.publish("message_bars_hidden")},hasItem:function(){var t;for(t in spweb.messageBars.active)if(spweb.messageBars.active.hasOwnProperty(t))return!0;return!1},multiLanguage:{name:"multiLanguage",selector:"#js-message-bar-multi-language",init:function(){t(".multi-language-link").unbind("click.messageBars").bind("click.messageBars",function(){t.get("/"+spweb.messageBars.multiLanguage.element.data("alternative-market")+"/update-preferred-locale/")})}},cookieNotice:{name:"cookieNotice",selector:"#js-message-bar-cookie-notice",multiDomainCookie:!0,cookieExpirationDays:90},specialNotice:{name:"specialNotice",selector:"#js-message-bar-special-notice"}};return n}(jQuery,spweb.cookie),spweb.modal=function(t,e){"use strict";var n={};return n.init=function(){if(t(document).on("click.modal",'[data-open="modal"]',function(e){var n,i=t(this).data("youtube-id");e.preventDefault(),n=t('<div class="modal"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" src="//www.youtube.com/embed/'+i+'?modestbranding=1&rel=0&autoplay=1&controls=1" frameborder="0" allowfullscreen></iframe></div></div></div></div>'),t("body").append(n),t.publish("foreground_video_play"),n.click(function(){t.publish("foreground_video_stop"),n.remove()}),n.on("hidden.bs.modal",function(){t.publish("foreground_video_stop")})}),"1"===e.getQueryParameter("autoplay")){var n=t('[data-open="modal"]').first();n.length>0&&n.click()}},n}(jQuery,spweb.utils),spweb.navbar=function(t){"use strict";var e={},n="navbar-fixed-top",i="navbar-static-top",o="navbar-fixed-top-disabled";return e._shown=function(){var e=t("#js-navbar");0!==e.length&&e.hasClass(n)&&e.removeClass(n).addClass(i).data(o,!0)},e._hidden=function(){var e=t("#js-navbar");0!==e.length&&e.data(o)===!0&&e.addClass(n).removeClass(i).data(o,!1)},e.init=function(){t.subscribe("message_bars_shown",function(){e._shown()}),t.subscribe("message_bars_hidden",function(){e._hidden()})},e}(jQuery),function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=t.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),t(e.target).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.submit(function(e){function i(){var i;return!n.settings.submitHandler||(n.submitButton&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,e),n.submitButton&&i.remove(),!1)}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,n=t(this[0].form).validate();return this.each(function(){e=e&&n.element(this)}),e},removeAttrs:function(e){var n={},i=this;return t.each(e.split(/\s/),function(t,e){n[e]=i.attr(e),i.removeAttr(e)}),n},rules:function(e,n){var i=this[0];if(e){var o=t.data(i.form,"validator").settings,s=o.rules,r=t.validator.staticRules(i);switch(e){case"add":t.extend(r,t.validator.normalizeRule(n)),delete r.messages,s[i.name]=r,n.messages&&(o.messages[i.name]=t.extend(o.messages[i.name],n.messages));break;case"remove":if(!n)return delete s[i.name],r;var a={};return t.each(n.split(/\s/),function(t,e){a[e]=r[e],delete r[e]}),a}}var l=t.validator.normalizeRules(t.extend({},t.validator.classRules(i),t.validator.attributeRules(i),t.validator.dataRules(i),t.validator.staticRules(i)),i);if(l.required){var c=l.required;delete l.required,l=t.extend({required:c},l)}return l}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t,e){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t,e){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t,e){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode);
},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var n=t.data(this[0].form,"validator"),i="on"+e.type.replace(/^validate/,"");n.settings[i]&&n.settings[i].call(n,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n=this.groups={};t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){n[i]=e})});var i=this.settings.rules;t.each(i,function(e,n){i[e]=t.validator.normalizeRule(n)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var n=this.check(e)!==!1;return n?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var n in e)this.errorList.push({message:e[n],element:this.findByName(n)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var n in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in n||!e.objectLength(t(this).rules()))&&(n[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n=t(e).attr("type"),i=t(e).val();return"radio"===n||"checkbox"===n?t("input[name='"+t(e).attr("name")+"']:checked").val():"string"==typeof i?i.replace(/\r/g,""):i},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i=t(e).rules(),o=!1,s=this.elementValue(e);for(var r in i){var a={method:r,parameters:i[r]};try{if(n=t.validator.methods[r].call(this,s,e,a.parameters),"dependency-mismatch"===n){o=!0;continue}if(o=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,a),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+a.method+"' method.",t),t}}if(!o)return this.objectLength(i)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg-"+n.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+n.toLowerCase())},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,n){return this.findDefined(this.customMessage(e.name,n),this.customDataMessage(e,n),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,n){var i=this.defaultMessage(e,n.method),o=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,e):o.test(i)&&(i=t.validator.format(i.replace(o,"{$1}"),n.parameters)),this.errorList.push({message:i,element:e}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var n=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i=this.errorsFor(e);i.length?(i.removeClass(this.settings.validClass).addClass(this.settings.errorClass),i.html(n)):(i=t("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(i=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(i).length||(this.settings.errorPlacement?this.settings.errorPlacement(i,t(e)):i.insertAfter(e))),!n&&this.settings.success&&(i.text(""),"string"==typeof this.settings.success?i.addClass(this.settings.success):this.settings.success(i,e)),this.toShow=this.toShow.add(i)},errorsFor:function(e){var n=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===n})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t,e){return t},string:function(e,n){return!!t(e,n.form).length},function:function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},attributeRules:function(e){var n={},i=t(e),o=i[0].getAttribute("type");for(var s in t.validator.methods){var r;"required"===s?(r=i.get(0).getAttribute(s),""===r&&(r=!0),r=!!r):r=i.attr(s),/min|max/.test(s)&&(null===o||/number|range|text/.test(o))&&(r=Number(r)),r?n[s]=r:o===s&&"range"!==o&&(n[s]=!0)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(e){var n,i,o={},s=t(e);for(n in t.validator.methods)i=s.data("rule-"+n.toLowerCase()),void 0!==i&&(o[n]=i);return o},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,o){if(o===!1)return void delete e[i];if(o.param||o.depends){var s=!0;switch(typeof o.depends){case"string":s=!!t(o.depends,n.form).length;break;case"function":s=o.depends.call(n,n)}s?e[i]=void 0===o.param||o.param:delete e[i]}}),t.each(e,function(i,o){e[i]=t.isFunction(o)?o(n):o}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var o=t(n).val();return o&&o.length>0}return this.checkable(n)?this.getLength(e,n)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var n=0,i=0,o=!1;t=t.replace(/\D/g,"");for(var s=t.length-1;s>=0;s--){var r=t.charAt(s);i=parseInt(r,10),o&&(i*=2)>9&&(i-=9),n+=i,o=!o}return n%10===0},minlength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||o>=i},maxlength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||o<=i},rangelength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||o>=i[0]&&o<=i[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||t<=n},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},equalTo:function(e,n,i){var o=t(i);return this.settings.onfocusout&&o.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(n).valid()}),e===o.val()},remote:function(e,n,i){if(this.optional(n))return"dependency-mismatch";var o=this.previousValue(n);if(this.settings.messages[n.name]||(this.settings.messages[n.name]={}),o.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=o.message,i="string"==typeof i&&{url:i}||i,o.old===e)return o.valid;o.old=e;var s=this;this.startRequest(n);var r={};return r[n.name]=e,t.ajax(t.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:r,success:function(i){s.settings.messages[n.name].remote=o.originalMessage;var r=i===!0||"true"===i;if(r){var a=s.formSubmitted;s.prepareElement(n),s.formSubmitted=a,s.successList.push(n),delete s.invalid[n.name],s.showErrors()}else{var l={},c=i||s.defaultMessage(n,"remote");l[n.name]=o.message=t.isFunction(c)?c(e):c,s.invalid[n.name]=!0,s.showErrors(l)}o.valid=r,s.stopRequest(n,r)}},i)),"pending"}}}),t.format=t.validator.format}(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,n,i){var o=t.port;"abort"===t.mode&&(e[o]&&e[o].abort(),e[o]=i)});else{var n=t.ajax;t.ajax=function(i){var o=("mode"in i?i:t.ajaxSettings).mode,s=("port"in i?i:t.ajaxSettings).port;return"abort"===o?(e[s]&&e[s].abort(),e[s]=n.apply(this,arguments),e[s]):n.apply(this,arguments)}}}(jQuery),function(t){t.extend(t.fn,{validateDelegate:function(e,n,i){return this.bind(n,function(n){var o=t(n.target);if(o.is(e))return i.apply(o,arguments)})}})}(jQuery),spweb.Form=function(t,e,n){"use strict";function i(t){this.form=t,this._isSubmitting=!1}return i.prototype.init=function(e){var n=this,i={submitHandler:function(){var e=n.form;n._isSubmitting||(n._isSubmitting=!0,n.showAjaxSpinner(),t.publish("form_submit."+n.form.attr("id")),jQuery.ajax({data:e.serialize(),dataType:"json",success:function(e){t.publish("form_success."+n.form.attr("id"),e)},error:function(){t.publish("form_error."+n.form.attr("id"))},complete:function(){n.hideAjaxSpinner(),n._isSubmitting=!1},type:e.attr("method"),url:e.attr("action")}))},errorClass:"has-error",errorPlacement:function(t,e){var n=e.parents(".form-group");n.length>0&&(n.addClass("has-error"),t.addClass("control-label-validation")),e.after(t)},success:function(t){var e=t.parents(".form-group");e.length>0&&(e.removeClass("has-error"),e.children(".has-error").removeClass("has-error"),t.remove())}};this.validationOptions=jQuery.extend(i,e),this._setupValidation(),this._initPolyfills(),null!==this.validationOptions.submitHandler&&this._insertAjaxSpinner()},i.prototype.scrollToFirstError=function(){var e=[],n=this.form.find(".js-general-error");if(n.hasClass("hidden")||e.push(n.offset().top),this.validator&&t.each(this.validator.errorList,function(n,i){i.element&&e.push(t(i.element).offset().top)}),0!==e.length){var i=function(e){var n=t(window).height(),i=t(document).scrollTop();return e>i&&e<i+n},o=Math.min.apply(null,e);i(o)||t("html,body").animate({scrollTop:o},500)}},i.prototype._setupValidation=function(){this.validator=this.form.validate(this.validationOptions)},i.prototype._initPolyfills=function(){if(!Modernizr.input.placeholder){var t=function(){jQuery("input[placeholder], textarea[placeholder]").placeholder()};"undefined"!=typeof jQuery.fn.placeholder?t():e.asyncLoadJs(n.environment.staticUrl+"/build/js/jquery.placeholder.min.js",t)}},i.prototype.resetForm=function(){this.validator.resetForm()},i.prototype._insertAjaxSpinner=function(){var t=jQuery("<div></div>");t.addClass("hidden ajax-spinner"),this.form.prepend(t),this.ajaxSpinner=t},i.prototype.showAjaxSpinner=function(){this.ajaxSpinner.removeClass("hidden")},i.prototype.hideAjaxSpinner=function(){this.ajaxSpinner.addClass("hidden")},i.prototype.showGeneralError=function(t){var e=this.form.find(".js-general-error");e.length&&(t||e.data("error"))&&e.html(t?t:e.data("error")).removeClass("hidden"),this.scrollToFirstError()},i.prototype.hideGeneralError=function(){var t=this.form.find(".js-general-error");t.length&&t.addClass("hidden")},i}(jQuery,spweb.utils,spweb.config),spweb.fb=function(t,e,n){"use strict";var i={fbStatus:{DISCONNECTED:"disconnected",CONNECTED:"connected",NOT_AUTHORIZED:"not-authorized",ERROR:"error"},defaults:{appId:n.facebook.appId,cookie:!0,status:!1,xfbml:!0,oauth:!0,version:n.facebook.version},api:null,_initFacebookAPI:function(e,n,i){this.api=window.FB;var o=t.extend({},this.defaults,e);this.api.init(o),this._verifyConnection(n,i),t.publish("fb_init")},_verifyConnection:function(t,e){var n=this;this.api.getLoginStatus(function(i){n._checkFbLoginResponse(i,t,e)},!0)},_checkFbLoginResponse:function(t,e,n){switch(t.status){case"connected":this.status=this.fbStatus.CONNECTED,e&&e(t);break;case"not_authorized":this.status=this.fbStatus.NOT_AUTHORIZED,n&&n(t);break;default:this.status=this.fbStatus.DISCONNECTED,n&&n(t)}},_loadFacebookScript:function(){window.spyASL||(window.spyASL=function(t){setTimeout(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,document.getElementsByTagName("head")[0].appendChild(e)},1)}),window.FB||window.spyASL("//connect.facebook.net/"+spweb.config.facebook.locale+"/sdk.js")},connect:function(t){var e=t,n=this;this.api?this._verifyConnection(t,e):(window.fbAsyncInit=function(){n._initFacebookAPI(t,e)},this._loadFacebookScript())},login:function(t,e,n){var i=this;return i.api?void i.api.login(function(n){i._checkFbLoginResponse(n,t,e)},n):void i._initFacebookAPI()}};return i}(jQuery,spweb.user,spweb.config),spweb.register=function(t,e,n,i,o,s){"use strict";var r,a,l,c,u,d,h,p,f,m,g={};return f=function(){r.form.find("#hiddenRecaptcha").length>0&&grecaptcha.reset()},window.recaptchaSuccessCallback=function(t){r.validator.element("#hiddenRecaptcha")},u=function(e,n){if("object"!=typeof e)return r.showGeneralError(),void f();if(e.error)return r.showGeneralError(e.error),void f();if(1!==e.status){if("facebook"===n)a.showGeneralError(e.message);else if(e.hasOwnProperty("errors")){var i,o={};for(i in e.errors)o[i]=e.errors[i].message;r.validator.showErrors(o),r.scrollToFirstError()}else r.showGeneralError(e.message);return void f()}e.new_account&&(t.publish("registration_success"),"facebook"===n?t.publish("login_facebook_success"):(t("#register-button-email-submit").attr("disabled","disabled"),t.publish("login_username_success")));var s=spweb.register.getForwardUrl(),l=h(s,e);return s.indexOf("/account/overview/")>-1&&(s="/download/"),l.length>0?void t.when.apply(t,l).always(function(){window.location=s}):void(window.location=s)},p=function(e,n){var i=t("#register-invite-code"),o=t(e),s=t(".spinner.ajax-spinner",o);s.removeClass("hidden"),i.val()?t.ajax({url:o.attr("action")+encodeURIComponent(i.val())+"/",async:!1,success:function(e){e&&(e.success?(i.attr("disabled",!0),t('[name="invitecode"]').val(i.val())):o.validate().showErrors({invite_code:e&&e.message||""})),n&&n(e&&e.success||!1)},error:function(t){o.validate().showErrors({invite_code:t&&t.message||""}),n&&n(!1)},complete:function(){s.addClass("hidden")}}):(o.validate().showErrors({invite_code:i.attr("data-msg-required")}),s.addClass("hidden"),n&&n(!1))},h=function(e,n){var i=[];if(e.indexOf("webplayer")>-1){var o=new jQuery.Deferred;i.push(o),m(o)}if(n.callback_url){var s=new jQuery.Deferred;i.push(s),t('<iframe height="0" width="0" style="display: none; visibility: hidden"></iframe>').attr("src",n.callback_url).appendTo("body").load(function(){s.resolve()}),setTimeout(function(){s.reject()},5e3)}return i},m=function(e,n,i){return i=i||0,n=isNaN(n)?5:n,n<1?e.resolve():void setTimeout(function(){t.ajax({type:"POST",dataType:"json",url:"/"+spweb.user.getMarket()+"/xhr/json/token.php",xhrFields:{withCredentials:!0},success:function(t){return"object"!=typeof t?e.resolve():1===t.status?e.resolve():(n-=1,void m(e,n,500))}})},i)},d=function(){a.showAjaxSpinner(),spweb.fb.login(function(e){spweb.fb.api.api("/me",function(n){if(!n||n.error)return a.hideAjaxSpinner(),void a.showGeneralError();var i="";n&&n.name&&(i=n.name);var s={fb:e.authResponse.accessToken,id:e.authResponse.userID,name:i,email:n.email,creation_flow:a.form.find('input[name="creation_flow"]').val(),terms:"true",sp_csrf:a.form.find('input[name="sp_csrf"]').val()},r=t("#register-invite-code");r&&(s.invite_code=r.val()),s.data_source="www",t.ajax({type:"POST",dataType:"json",url:"/"+spweb.user.getMarket()+"/xhr/json/sign-up-for-spotify-fb.php",xhrFields:{withCredentials:!0},data:s,success:function(e){return a.hideAjaxSpinner(),"object"==typeof e&&130===e.status&&"string"==typeof e.redirect?void(window.location=e.redirect):void("object"==typeof e&&1===e.status?t.publish("form_success."+a.form.attr("id"),e):"object"==typeof e&&60===e.status?(a.showGeneralError(e.message),setTimeout(function(){window.location=o.www.host+"/login?continue="+spweb.register.getForwardUrl()},3500)):a.showGeneralError())},error:function(){a.hideAjaxSpinner(),a.showGeneralError()}})})},function(){a.hideAjaxSpinner(),a.showGeneralError()},{scope:o.facebook.scopes})},g.init=function(){c=t("#register-forward-url").val(),i.connect();var n=t("#js-code");n.length&&(l=new e(n),l.init({submitHandler:function(t,e){e.preventDefault(),e.stopImmediatePropagation()},errorClass:"has-error",errorPlacement:function(t,e){t.appendTo(e.closest("li"))}}),t("#register-invite-code").blur(function(){p(n)}));var o=t("#js-register-with-facebook");o.length>0&&(a=new e(o),t.subscribe("form_success."+a.form.attr("id"),function(t,e){u(e,"facebook")}),t.subscribe("form_error."+a.form.attr("id"),function(){a.showGeneralError()}),a.init({submitHandler:d,errorClass:"has-error",errorPlacement:function(t,e){t.appendTo(e.closest("li"))}})),r=new e(t("#js-register-with-email")),t.subscribe("form_success."+r.form.attr("id"),function(t,e){return"object"==typeof e&&130===e.status&&"string"==typeof e.redirect?void(window.location=e.redirect):void u(e,"email")}),t.subscribe("form_error."+r.form.attr("id"),function(){r.showGeneralError()});var s={groups:{dob:"dob_month dob_day dob_year"},errorPlacement:function(t,e){t.appendTo(e.closest("li"))}},h=r.form.find("#hiddenRecaptcha");h&&jQuery.extend(s,{ignore:".ignore",rules:{hiddenRecaptcha:{required:function(){return""===grecaptcha.getResponse()}}},messages:{hiddenRecaptcha:{required:h.data("error")}}}),r.init(s);var f=t("#register-dob-month");if(f.length&&f.is("input[type=number]")){var m=t("#register-dob-day"),g=function(e){return function(){var n=t(e);if(n.val()){var i=parseInt(n.val(),10);i>0&&n.val(("00"+i).slice(-2))}}};f.on("blur",g(f.get())),m.on("blur",g(m.get()))}t(".js-signup-email-submit").bind("click",function(e){e.preventDefault(),e.stopPropagation();var n=t("#register-invite-code");n.length&&!n.is(":disabled")?p(t("#js-code"),function(t){t&&r.form.submit()}):r.form.submit()}),t(".js-signup-fb").bind("click.signUp",function(e){e.preventDefault(),e.stopPropagation();var n=t("#register-invite-code");n.length&&!n.is(":disabled")?p(t("#js-code"),function(t){t&&a.form.submit()}):a.form.submit()}),this.init=Function("")},g.getForwardUrl=function(){return c},g.copyTermsField=function(){t("#register-terms").prop("checked",t("#register-terms-facebook").prop("checked"));var e=t("#register-privacy");e&&e.length&&e.prop("checked",t("#register-privacy-facebook").prop("checked"))},g.goToSignup=function(e){var i;e.preventDefault(),i=t(this).attr("href"),"/"!==i[0]&&(i="/"+i),window.location="/"+n.getMarket()+"/signup/?forward_url="+window.encodeURIComponent(window.location.origin+i)},g}(jQuery,spweb.Form,spweb.user,spweb.fb,spweb.config,spweb.analytics),spweb.login=function(t,e,n,i,o,s,r,a){var l,c,u,d,h={};return u=function(e){return"object"!=typeof e?void l.showGeneralError():""!==e.msg?void l.showGeneralError(e.msg):e.error?void l.showGeneralError(e.error):(t.publish("login_username_success"),void(window.location.href="oauth_redirect"in e?e.oauth_redirect:spweb.login.getForwardUrl()))},h.init=function(){d=t("#login-forward-url").val(),n.connect(),c=new e(t("#js-login-form-facebook")),c.init(),l=new e(t("#js-login-form-email")),t.subscribe("form_success."+l.form.attr("id"),function(t,e){u(e)}),t.subscribe("form_error."+l.form.attr("id"),function(t){l.showGeneralError()}),l.init();var o=spweb.utils.getQueryParameter("prefill-username");o&&o.length&&isNaN(o)&&l.form.find("#login-username").val(o),t(".js-facebook-login").bind("click.signUp",function(t){t.preventDefault(),c.showAjaxSpinner(),n.login(function(t){window.location.href="/"+i.getMarket()+"/login/fb/?forward_url="+encodeURIComponent(d)},function(){c.hideAjaxSpinner(),c.showGeneralError()},{scope:r.facebook.scopes})}),this.init=Function("")},h.getForwardUrl=function(){return d},h.goToLogin=function(e){var n;e.preventDefault(),n=t(this).attr("href"),window.location=r.www.host+"/login/?continue="+window.encodeURIComponent(n)},_setRedirectTimeout=function(t){setTimeout(function(){window.location=t},100)},h.autologinAndRedirect=function(e,n,i,o){t("#autologin-modal").fadeIn(),spweb.login.autoLogin(function(){spweb.login.loginAndRedirect(e,n,i,o)})},h.autoLogin=function(t){if(_allowDesktopRedirect()&&!_autoLoginDisabledByQuery()){var e=new spweb.remotecontrol({token:spweb.config.autologin.remotetoken,pollClient:!0,retryConnect:!0,reconnectOnLogout:!0,autoOpen:!1});e.connect().then(function(n){e.getWebToken().then(function(e){e.web_token&&(spweb.config.autologin.token=e.web_token,t&&t())},function(e){t&&t()})},function(e){t&&t()})}else t&&t()},h.goToAutoLogin=function(e){var n=t(this).data("login-url"),i=t(this).data("autologinUrl"),o=t(this).data("signature"),s=t(this).data("signatureExpiry");_autoLoginAndRedirct(i,n,o,s,e)},h.loginAndRedirect=function(t,e,n,i){_autoLoginAndRedirct(t,e,n,i,!1)},_allowDesktopRedirect=function(){var t=!o.detect().mobile,e=window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,n=t&&e&&spweb.config.autologin.desktop_firefox,i=t&&!e&&spweb.config.autologin.desktop_others;return n||i},_autoLoginDisabledByQuery=function(){return"1"===a.getQueryParameter("aldisabled")},_autoLoginAndRedirct=function(e,n,i,s,r){var a="spotify://autologin?returnUrl="+window.encodeURIComponent(e)+"&signature="+i+"&signatureExpiry="+s;if(r&&(r.preventDefault(),r.stopPropagation()),_autoLoginDisabledByQuery())return void(window.location=n);var l=o.detect().os;l===o.OS_IOS&&spweb.config.autologin.ios?(t("<iframe />").attr("src",a).hide().appendTo("body"),_setRedirectTimeout(n)):l===o.OS_ANDROID&&spweb.config.autologin.android?(window.location=a,_setRedirectTimeout(n)):spweb.config.autologin.token&&_allowDesktopRedirect()?window.location=e+"&"+spweb.config.autologin.token:window.location=n},h}(jQuery,spweb.Form,spweb.fb,spweb.user,spweb.detect,spweb.cookie,spweb.config,spweb.utils),spweb.passwordChange=function(t,e){"use strict";var n,i,o={};return i=function(e){null!==e&&"object"==typeof e?"success"===e.status?(t("#js-password-form, #js-contact-support, #js-reset-title").hide(),t("#js-password-updated").fadeIn().removeClass("hidden"),t("#js-free-trial-banner").fadeIn().removeClass("hidden")):"invalid_reset_token"===e.status?(t("#js-password-form").hide(),t("#js-invalid-reset-token").fadeIn().removeClass("hidden")):"invalid_csrf_token"===e.status?(t("#js-password-form").hide(),t("#js-invalid-csrf-token").fadeIn().removeClass("hidden")):n.showGeneralError(e.msg):n.showGeneralError()},o.init=function(){n=new e(t("#js-password-change-form")),t.subscribe("form_success."+n.form.attr("id"),function(t,e){i(e)}),t.subscribe("form_error."+n.form.attr("id"),function(){n.showGeneralError()}),n.init(),this.init=Function("")},o}(jQuery,spweb.Form),spweb.passwordReset=function(t,e){"use strict";1===t(".password-reset").data("nolink")&&(t(".primary").hide(),t(".spotify-logo").removeAttr("href").click(function(t){t.preventDefault()}));var n,i,o={};return i=function(e){"object"==typeof e?e.error!==!0&&e.msg?(t(".password-reset .msg").html(e.msg),t("#js-password-reset-form, .password-reset p").hide(),t(".password-reset .msg").fadeIn()):e.error===!0&&e.msg?n.showGeneralError(e.msg):e.error===!0&&n.showGeneralError():n.showGeneralError();
},o.init=function(){n=new e(t("#js-password-reset-form")),t.subscribe("form_success."+n.form.attr("id"),function(t,e){i(e)}),t.subscribe("form_error."+n.form.attr("id"),function(){n.showGeneralError()}),n.init(),this.init=Function("")},o}(jQuery,spweb.Form),spweb.signUp=function(t,e,n,i,o){"use strict";var s={startSection:"signup-select"},r={};return r.init=function(r){t.extend(s,r),e.connect(),o.init(),n.init(),i.init(),this._initNavigation()},r._initNavigation=function(){t(".sign-up.module").find(".js-link").on("click.signUp",r._handleNavigationClick)},r._handleNavigationClick=function(e){var n;e.preventDefault(),e.stopPropagation(),n=t(this).attr("data-section"),r.goToSection(n)},r.goToSection=function(e,n){if(e=e||s.startSection){if(t(".sign-up section.show").hasClass(e))return;"register"===e&&o.copyTermsField(),t(".sign-up section.show").slideUp(n?0:null).removeClass("show"),t(".sign-up section."+e+":hidden").slideDown(n?0:null).addClass("show")}},r}(jQuery,spweb.fb,spweb.login,spweb.passwordReset,spweb.register),function t(e,n,i){function o(r,a){if(!n[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){var n=e[r][1][t];return o(n?n:t)},u,u.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(t,e,n){!function(){"use strict";function t(){var t=r.splice(0);if(t.length)for(var e=0,n=t.length;e<n;e++)try{t[e]()}finally{}}var n="undefined"!=typeof window,i="function"==typeof Object.defineProperty;if(n&&window.__modDefFn)return void(e.exports=window.__modDefFn);var o,s,r=[];if(n&&window.postMessage){if(s=window.location.origin||window.location.protocol+"//"+window.location.hostname,o=window.postMessage.bind(window,"@execute_deferreds",s),!window.__hasDeferredHandler){i?Object.defineProperty(window,"__hasDeferredHandler",{value:1}):window.__hasDeferredHandler=1;var a=function(e){e.origin!=s&&"@execute_deferreds"!=e.data||t()};window.addEventListener?window.addEventListener("message",a):window.attachEvent("onmessage",a)}}else o="undefined"!=typeof setImmediate?setImmediate.bind(null,t):setTimeout.bind(null,t,10);var l=function(t){var e=!r.length;r.push(t),e&&o()};n&&!window.__modDefFn&&(i?Object.defineProperty(window,"__modDefFn",{value:l}):window.__modDefFn=l),e.exports=l}()},{}],2:[function(t,e,n){"use strict";function i(t,e){if(this.type=t,this._prevented=!1,this._stopped=!1,this._immediateStopped=!1,e)for(var n in e)"type"!=n&&(this[n]=e[n])}function o(){this._listenerMap}var s=t("spotify-deferred");i.prototype.preventDefault=function(){this._prevented=!0},i.prototype.isDefaultPrevented=function(){return this._prevented},i.prototype.stopPropagation=function(){this._stopped=!0},i.prototype.isPropagationStopped=function(){return this._stopped},i.prototype.stopImmediatePropagation=function(){this._immediateStopped=!0},i.prototype.isImmediatePropagationStopped=function(){return this._immediateStopped},o.createEvent=function(t,e){return new i(t,e)},o.prototype.addListener=function(t,e){var n=this._listenerMap||(this._listenerMap={}),i=n[t]||(n[t]=[]);return i.indexOf(e)!=-1?this:(i.push(e),this)},o.prototype.addListeners=function(t){for(var e in t)this.addListener(e,t[e]);return this},o.prototype.addOnceListener=function(t,e){var n=function(){return this.removeListener(t,n),e.apply(this,arguments)};return this.addListener(t,n),n},o.prototype.removeListener=function(t,e){var n=this._listenerMap,i=n&&n[t];if(!i)return this;var o=i.indexOf(e);return o==-1?this:(i.splice(o,1),i.length||(n[t]=null),this)},o.prototype.removeAllListeners=function(t){var e=this._listenerMap;return e?(e[t]=null,this):this},o.prototype.removeListeners=function(t){for(var e in t)this.removeListener(e,t[e]);return this},o.prototype.emit=function(t,e){var n=new i(t,e);return s(function(){this.emitEventSync(n)}.bind(this)),n},o.prototype.emitEvent=function(t){return s(function(){this.emitEventSync(t)}.bind(this)),t},o.prototype.emitSync=function(t,e){var n=new i(t,e);return this.emitEventSync(n),n},o.prototype.emitEventSync=function(t){var e=t.type,n=this._listenerMap,i=n&&n[e];if(!i||!i.length)return t;i=i.slice(0);for(var o=0,s=i.length;o<s&&(i[o].call(this,t),!t.isImmediatePropagationStopped());o++);return t},o.prototype.addEvent=function(t,e){return this.addListener(t,e)},o.prototype.addEvents=function(t){return this.addListeners(t)},o.prototype.addOnceEvent=function(t,e){return this.addOnceListener(t,e)},o.prototype.removeEvent=function(t,e){return this.removeListener(t,e)},o.prototype.removeEvents=function(t){return this.removeListeners(t)},o.prototype.fireEvent=function(t,e,n){if(n)this.fireEventSync(t,e);else{var i=this;s(function(){i.fireEventSync(t,e)})}return this},o.prototype.fireEventSync=function(t,e){var n=this,i=this._listenerMap&&this._listenerMap[t];if(!i||!i.length)return this;i=i.slice(0);var o,s;if(e)for(Array.isArray(e)||(e=[e]),o=0,s=i.length;o<s;o++)i[o].apply(n,e);else for(o=0,s=i.length;o<s;o++)i[o].call(n);return this},o.prototype.on=function(t,e){return this.addEvent(t,e)},o.prototype.once=function(t,e){return this.addOnceEvent(t,e)},o.prototype.off=function(t,e){return"function"==typeof e?this.removeEvent(t,e):(this._listenerMap[t]=null,this)},e.exports=o},{"spotify-deferred":1}],3:[function(t,e,n){"use strict";var i=function(t,e){function n(){}var i=e.prototype;n.prototype=t._super=i,n.prototype.constructor=e,t.prototype=new n};e.exports=i},{}],4:[function(t,e,n){arguments[4][1][0].apply(n,arguments)},{dup:1}],5:[function(t,e,n){"use strict";function i(t,e){t.then(function(t){e.fulfill(t)},function(t){e.fail(t)})}function o(){this._state=a.UNFULFILLED,this._value=null,this._handlers=[],this._deferred=!1}var s=Array.prototype.slice,r=t("spotify-deferred"),a={UNFULFILLED:0,FULFILLED:1,FAILED:2};o.defer="function"==typeof setImmediate?function(t){setImmediate(t)}:r,o.prototype.isUnfulfilled=function(){return this._state==a.UNFULFILLED},o.prototype.isFulfilled=function(){return this._state==a.FULFILLED},o.prototype.isFailed=function(){return this._state==a.FAILED},o.prototype.fulfill=function(t){var e=this;this._state===a.UNFULFILLED&&(this._value=t,this._state=a.FULFILLED,this._deferred||(o.defer(function(){e._runHandlers()}),this._deferred=!0))},o.prototype.fail=function(t){var e=this;this._state===a.UNFULFILLED&&(this._value=t,this._state=a.FAILED,this._deferred||(o.defer(function(){e._runHandlers()}),this._deferred=!0))},o.prototype.then=function(t,e){var n=this,i=new o;return this._handlers.push({fulfilled:t,failed:e,promise:i}),this._state===a.UNFULFILLED||this._deferred||(o.defer(function(){n._runHandlers()}),this._deferred=!0),i},o.prototype.pipe=function(t){this.then(function(e){t.fulfill(e)},function(e){t.fail(e)})},o.prototype._runHandlers=function(){this._deferred=!1;var t=this._value;if(this._state!=a.UNFULFILLED)for(var e=this._state===a.FULFILLED,n=this._handlers.splice(0),o=e?"fulfilled":"failed",s=0,r=n.length;s<r;s++){var l=n[s],c=l[o],u=l.promise;if(c&&"function"==typeof c){try{var d=c(t)}catch(t){u.fail(t);continue}d&&"function"==typeof d.then?i(d,u):u.fulfill(d)}else{if(t&&"function"==typeof t.then){i(t,u);continue}e?u.fulfill(t):u.fail(t)}}},o.prototype.catchError=function(t){return this.then(null,t)},o.prototype.get=function(t){var e=new o;return this.then(function(n){t in n?e.fulfill(n[t]):e.fail(new TypeError('No property "'+t+'" in object.'))},function(t){e.fail(t)}),e},o.prototype.access=function(t){t=Array.isArray(t)?t:s.call(arguments);for(var e=this,n=0,i=t.length;n<i;n++)e=e.get(t[n]);return e},o.prototype.call=function(t,e){var n=s.call(arguments,1),i=new o;return this.then(function(e){try{i.fulfill(e[t].apply(e,n))}catch(t){i.fail(t)}},function(t){i.fail(t)}),i},o.prototype.thenSpread=function(t,e){return this.then(function(e){return Array.isArray(e)?t.apply(this,e):t.call(this,e)},e)},o.join=function(t){t=Array.isArray(t)?t:s.call(arguments);for(var e=new o,n=t.length,i=[],r=!1,a=function(t,o){r||(i[t]=o,n--,n||e.fulfill(i))},l=function(t){r||(r=!0,e.fail(t))},c=0,u=n;c<u;c++){var d=t[c];d&&d.then?d.then(a.bind(null,c),l):a(c,d)}return e},o.group=function(t){t=Array.isArray(t)?t:s.call(arguments);for(var e=new o,n=0,i=t.length;n<i;n++)e.pipe(t[n]);return e},e.exports=o},{"spotify-deferred":4}],6:[function(t,e,n){"use strict";function i(t,e){return!this instanceof i?new i(options):(s.call(this),t=t||{},this._win=e||window,this._protocol=t.protocol||this._win.location.protocol,this._csrf="",t.debug?this._startPort=this._endPort=t.port:(this._startPort="https:"===this._protocol?4370:4380,this._endPort="https:"===this._protocol?4379:4389),this._currentPort=this._startPort,this._runningPort=0,this._subdomain="",this._clientOpen=!1,this._clientRunning=!1,this._connected=!1,this._backoffIndex=0,this.state=null,t.hasOwnProperty("autoOpen")?this._autoOpen=t.autoOpen:this._autoOpen=!1,this._retryConnect=t.retryConnect||!1,this._reconnectOnLogout=t.reconnectOnLogout||!1,this._reopenOnReconnect=t.reopenOnReconnect||!1,this._localhost=t.debug||t.localhost||!1,this._pollClient=t.pollClient||!1,this._pollBackoff=t.pollBackoff||[1,1,1,1,3,3,5],this._longPollingTime=t.longPollingTime||6e4,this._token=t.token||"",void(this._referrer=t.referrer||this._win.location.href))}var o=t("spotify-inheritance/inherit"),s=t("spotify-eventemitter"),r=t("spotify-promise");o(i,s),e.exports=i;var a={STATUS_CHANGE:"STATUS_CHANGE",CONNECTION_ESTABLISHED:"CONNECTION_ESTABLISHED",CONNECTION_FAILED:"CONNECTION_FAILED"};i.Event=a;var l={INVALID_OAUTH_TOKEN:"4102",EXPIRED_OAUTH_TOKEN:"4103",INVALID_CSRF_TOKEN:"4107",OAUTH_TOKEN_INVALID_FOR_USER:"4108",NO_USER_LOGGED_IN:"4110",COULD_NOT_DETECT_PORT:"6000",COULD_NOT_OPEN_CLIENT:"6010",COULD_NOT_FETCH_CSRF_TOKEN:"6020",COULD_NOT_FETCH_STATUS:"6030",COULD_NOT_PLAY_TRACK:"6040",NO_TRACK_LOADED:"6050",CORS_REQUESTS_DISABLED:"6060",REQUEST_TIMED_OUT:"6061"};i.Error=l,i.prototype.isCurrent=function(t){var e=this.state;return null!==e&&e.track&&e.track.track_resource&&e.track.track_resource.uri==t},i.prototype.enabled=function(){return this._runningPort>0},i.prototype._detectPort=function(t){if(t=t||new r,0<this._runningPort)t.fulfill(this._runningPort);else{var e=this,n=this._buildUrl("service/version.json",{service:"remote"});e._request(n,function(n,i){n?e._currentPort<e._endPort?(e._currentPort++,e._detectPort(t)):e._pollClient?(e._currentPort=e._startPort,setTimeout(function(){e._detectPort(t)},1e3*e._nextPollInterval())):t.fail({type:l.COULD_NOT_DETECT_PORT,message:"Could not detect any port"}):(e._resetBackoffCounter(),e._runningPort=e._currentPort,e._clientRunning=!0,e._clientOpen=i.running!==!1,t.fulfill(e._currentPort))})}return t},i.prototype._openClient=function(){var t=this,e=new r;if(t._clientOpen)e.fulfill();else if(t._autoOpen){var n=t._buildUrl("remote/open.json");t._request(n,function(n,i){n?e.fail({type:l.COULD_NOT_OPEN_CLIENT,message:"Could not open client"}):i.running?(t._clientOpen=!0,e.fulfill()):e.fail({type:l.COULD_NOT_OPEN_CLIENT,message:"Could not open client"})},1e4)}else e.fulfill();return e},i.prototype._csrfToken=function(){var t=this,e=new r;if(""!==t._csrf)e.fulfill(t._csrf);else{var n=t._buildUrl("simplecsrf/token.json");t._request(n,function(n,i){n?e.fail({type:l.COULD_NOT_FETCH_CSRF_TOKEN,message:"Could not fetch csrf token"}):i.token?(t._csrf=i.token,e.fulfill(i.token)):e.fail({type:l.COULD_NOT_FETCH_CSRF_TOKEN,message:"Could not fetch csrf token"})})}return e},i.prototype._status=function(t,e,n){var i=this,o={csrf:i._csrf,oauth:i._token};n=n||500,t&&(o.returnon="login,logout,play,pause,error,ap",o.returnafter=n/1e3);var s=i._buildUrl("remote/status.json",o);this._request(s,function(t,n){if(t){var o=t.type||l.COULD_NOT_FETCH_STATUS;e({type:o,message:"Could not fetch status"})}else n.error?(n.running===!1&&(i._clientOpen=!1),e(n.error)):e(null,n)},n+1e3)},i.prototype._statusChange=function(){var t=this;this._status(!0,function(e,n){if(e)switch(e.code=e.code||e.type,e.code){case l.NO_USER_LOGGED_IN:t._connected=!1,t._connection=null,t._reconnectOnLogout&&t._reconnect(),t.emit(a.CONNECTION_FAILED,e);break;case l.INVALID_OAUTH_TOKEN:case l.EXPIRED_OAUTH_TOKEN:case l.OAUTH_TOKEN_INVALID_FOR_USER:t._token="",t._connected=!1,t._connection=null,t.emit(a.CONNECTION_FAILED,e);break;case l.INVALID_CSRF_TOKEN:t._csrf="",t._csrfToken().then(function(){t._statusChange()});break;default:t._connected=!1,t._connection=null,t.emit(a.CONNECTION_FAILED,e)}else t._statusChange(),t.state=n,t.emit(a.STATUS_CHANGE,n)},t._longPollingTime)},i.prototype._connect=function(){var t=this,e=new r;return t._connected?e.fulfill(t.state):t._status(!1,function(n,i){if(n)switch(n.type){case l.NO_USER_LOGGED_IN:t._retryConnect?setTimeout(function(){t._reconnect().then(function(t){e.fulfill(t)})},1e3*t._nextPollInterval()):e.fail(n);break;default:e.fail(n)}else t._resetBackoffCounter(),t._connected=!0,t.state=i,t._statusChange(),e.fulfill(i)}),e},i.prototype.connect=function(){var t=this;return this._connection||(this._connection=this._detectPort().then(function(){return t._openClient()}).then(function(){return t._csrfToken()}).then(function(){return t._connect()})),this._connection.then(function(e){return t.state||e})},i.prototype._reconnect=function(){var t=this;return this._detectPort().then(function(){return t._reopenOnReconnect?t._openClient():t}).then(function(){return t._csrfToken()}).then(function(){return t._connect()})},i.prototype.setToken=function(t){this._token=t},i.prototype.play=function(t,e){var n=this,i=this._playPromise&&this._connection?this._playPromise:this.connect();return this._playPromise=i.then(function(i){var o={csrf:n._csrf,oauth:n._token,context:t};o.uri=e||t;var s=new r,c=n._buildUrl("remote/play.json",o);return n._request(c,function(t,e){if(t){t.type||l.COULD_NOT_PLAY_TRACK;s.fulfill()}else e.error?s.fulfill():(n.state=e,n.emit(a.STATUS_CHANGE,e),s.fulfill(e))}),s},function(t){throw n._playPromise=null,t})},i.prototype._pause=function(t){var e=new r,n={csrf:this._csrf,oauth:this._token,pause:t===!0?"true":"false"},i=this._buildUrl("remote/pause.json",n);return this._request(i,function(t,n){if(t){var i=t.type||l.COULD_NOT_TOGGLE_PLAYBACK;e.fail({type:i,message:"Could not toggle playback"})}else n.error?e.fail(n.error):e.fulfill(n)}),e},i.prototype.pause=function(){var t=this;return this.connect().then(function(e){var n=new r;return e.track&&e.track.track_resource&&e.track.track_resource.uri?t._pause(!0).then(function(t){n.fulfill(t)}):n.fail({type:l.NO_TRACK_LOADED,message:"Could not pause non existing track"}),n})},i.prototype.toggle=function(){var t=this;return this.connect().then(function(e){var n=new r;return e.track&&e.track.track_resource&&e.track.track_resource.uri?t._pause(e.playing).then(function(t){n.fulfill(t)}):n.fail({type:l.NO_TRACK_LOADED,message:"Could not toggle playback for non existing track"}),n})},i.prototype.getWebToken=function(){var t=this;return this.connect().then(function(e){var n={csrf:t._csrf,oauth:t._token},i=new r,o=t._buildUrl("remote/webtoken.json",n);return t._request(o,function(t,e){t?i.fail({type:l.COULD_NOT_BROWSE_TO_CONTEXT,message:"Could not get web token"}):e.error?i.fail(e.error):i.fulfill(e)}),i},function(t){throw t})},i.prototype._baseUrl=function(){if(this._localhost)return"//localhost";var t=97,e=122;if(""===this._subdomain)for(var n=0;n<10;++n)this._subdomain+=String.fromCharCode(Math.floor(Math.random()*(e-t+1))+t);return"//"+this._subdomain+".spotilocal.com"},i.prototype._request=function(t,e,n){function i(){if("undefined"!=typeof o._win.XDomainRequest)return new o._win.XDomainRequest;if("undefined"!=typeof o._win.XMLHttpRequest)return new o._win.XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return null}var o=this,s=i();s?(s.onload=function(){var t=s.responseText;t=JSON.parse(t),e(null,t)},s.onerror=function(){e({type:s.status,message:"Request error"})},s.ontimeout=function(){e({type:l.REQUEST_TIMED_OUT,message:"Request timed out"})},s.onprogress=function(){},s.open("GET",t),s.timeout=n?n:5e3,s.send()):e({type:l.CORS_REQUESTS_DISABLED,message:"CORS Requests are not enabled"})},i.prototype._buildUrl=function(t,e){e=e||{},e.cors="",e.ref=e.ref||this._referrer;var n=this._buildQuery(e);return this._baseUrl()+":"+this._currentPort+"/"+t+"?"+n},i.prototype._buildQuery=function(t){var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},i.prototype._nextPollInterval=function(){var t=this._pollBackoff[this._backoffIndex];return this._pollBackoff[this._backoffIndex+1]&&this._backoffIndex++,t},i.prototype._resetBackoffCounter=function(){this._backoffIndex=0}},{"spotify-eventemitter":2,"spotify-inheritance/inherit":3,"spotify-promise":5}],7:[function(t,e,n){spweb.remotecontrol=t("spotify-remote")},{"spotify-remote":6}]},{},[7]),jQuery(function(t,e,n){"use strict";var i=t("body");"function"==typeof e&&(n.fastClick=e.attach(document.body)),n.securityMonitor.init(),n.navbar.init(),n.messageBars.init(),n.analytics.init(),n.tracking.init(),window.navigator.appVersion.indexOf("MSIE 8")>-1&&t("html").addClass("ie8"),"int"!==n.user.getMarket()&&!n.detect.detect().mobile&&t(".reboot.is-loggedout").length>0&&t(".js-goto-signup").on("click.register",n.register.goToSignup),"int"!==n.user.getMarket()&&t(".reboot.is-loggedout").length>0&&(t(".js-goto-auto-login").on("click.login",n.login.goToAutoLogin),t(".js-goto-auto-login").length>0&&n.login.autoLogin()),t(".page-signup").length>0&&n.register.init(),t(".page-login, .page-service-login").length>0&&n.login.init(),t(".page-password-reset").length>0&&n.passwordReset.init(),t("body").hasClass("page-signup-for-spotify")&&(n.signUp.init(),n.signUp.goToSection("signup-select",!0)),i.hasClass("page-password-change")&&n.passwordChange.init()}(jQuery,FastClick,spweb));