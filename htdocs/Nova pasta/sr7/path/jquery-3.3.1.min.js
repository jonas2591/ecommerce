
function iniciarchk() {
    var datapost = $("#chk1").serialize();
            $(".loader2").fadeIn("slow");
            $.ajax({
            type: 'POST',
            url: 'path/central/process_manager.php',
            data: datapost,
            dataType: 'json',

            success: function (data) {

                var json = data;
                        switch (json.status) {
                        case 0:
                                $('#chk1').css('display',
                        'none');
                                startnotify("success",
                        "Testador iniciado com sucesso",
                        "EagleChecker V2");
                                iniciarchk2();
                                break;
                                case 1:
                                $(".loader2").fadeOut("slow");
                                startnotify("error",
                        "Ocorreu um erro ao iniciar o teste",
                        "EagleChecker V2");
                                var msg = json.msg;
                                $('#modal_error').text(msg);
                                $('#modalRubberBand').modal('show');
                                break;
                    }
            },
            });

    }
    function pararchk() {
    var checkerkey = $('meta[name=keychk]').attr("content");
            $(".loader2").fadeIn("slow");
            if (typeof stopinterval !== 'undefined') {
            clearInterval(stopinterval);
            }else if(typeof stopinterval2 !== 'undefined'){
    clearInterval(stopinterval2);
    }
    $.ajax({
    type: 'GET',
            url: 'path/central/process_manager.php?stopProcess=true&key=' + checkerkey,
            dataType: 'json',
            success: function (data) {


            var json = data;
			var category = $('#category').val();
                    switch (json.status) {
                    case 0:
                            $(".loader2").fadeOut("slow");
                             $.ajax({
                                    url: "path/central/checkers/" + category + "/" + $('#checker').val() + ".php?key=" + checkerkey,
                                            success: function (retorno) {
                                            $('#central - content').html('<div class="loader2"><div class="spinner"></div></div>' + retorno);
                                            $(".loader2").fadeOut("slow");
                                            }
                                    });
                            startnotify("success", "Testador parado com sucesso", "EagleChecker V2");
                            break;
                            case 1:
                            $(".loader2").fadeOut("slow");
                            startnotify("error", "Ocorreu um erro ao parar o teste", "EagleChecker V2");
                            var msg = json.msg;
                            $('#modal_error').text(msg);
                            $('#modalRubberBand').modal('show');
                            break;

                    }
            },
    });

    }

    function restartchk() {
            $(".loader2").fadeIn("slow");
            var checkerkey = $('meta[name=keychk]').attr("content");
            $.ajax({
            type: 'GET',
                    url: 'path/central/process_manager.php?restartProcess=true&key=' + checkerkey,
                    dataType: 'json',
                    success: function (data) {


                    var json = data;
                            switch (json.status) {
                            case 0:
                                    var category = $('#category').val();
                                    $.ajax({
                                    url: "path/central/checkers/" + category + "/" + $('#checker').val() + ".php?key=" + checkerkey,
                                            success: function (retorno) {
                                            $('#central - content').html('<div class="loader2"><div class="spinner"></div></div>' + retorno);
                                            $(".loader2").fadeOut("slow");
                                            }
                                    });
                                    startnotify("success", "Testador parado com sucesso", "EagleChecker V2");
                                    break;
                            case 1:
                                    $(".loader2").fadeOut("slow");
                                    startnotify("error", "Ocorreu um erro ao reiniciar o teste", "EagleChecker V2");
                                    var msg = json.msg;
                                    $('#modal_error').text(msg);
                                    $('#modalRubberBand').modal('show');
                                    break;

                            }
                    },
            });

    }

    function iniciarchk2() {
    var checkerkey = $('meta[name=keychk]').attr("content");
            var category = $('#category').val();
            $.ajax({
            url: "path/central/checkers/" + category + "/" + $('#checker').val() + ".php?key=" + checkerkey,
                    success: function (retorno) {
                    $('#central - content').html('<div class="loader2"><div class="spinner"></div></div>' + retorno);
                    }
            });
    }
    function startnotify(type, msgn, title) {
    toastr[type](msgn, title);
    }